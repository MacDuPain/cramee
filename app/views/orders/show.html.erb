<h1 class="mt-4">Commande #<%= @order.id %></h1>

<div class="card mt-3">
  <div class="card-header">
    Détails de la commande
  </div>
  <ul class="list-group list-group-flush">
    <% @order.items.each do |item| %>
      <li class="list-group-item d-flex justify-content-between align-items-center">
        <%= item.name %>
        <span><%= number_to_currency(item.price) %></span>
      </li>
    <% end %>
    <li class="list-group-item d-flex justify-content-between align-items-center">
      <strong>Total</strong>
      <strong><%= number_to_currency(@order.items.sum(:price)) %></strong>
    </li>
  </ul>
</div>

<form action="/livraison" method="post">
  <div class="form-row">
    <div class="form-group col-md-6">
      <label for="nom">Nom</label>
      <input type="text" id="nom" name="nom" class="form-control" required>
    </div>
    <div class="form-group col-md-6">
      <label for="prenom">Prénom</label>
      <input type="text" id="prenom" name="prenom" class="form-control" required>
    </div>
  </div>
  <div class="form-group">
    <label for="adresse">Adresse de livraison</label>
    <textarea id="adresse" name="adresse" class="form-control" rows="3" required></textarea>
  </div>
  <div class="form-row">
    <div class="form-group col-md-4">
      <label for="code_postal">Code postal</label>
      <input type="text" id="code_postal" name="code_postal" class="form-control" required>
    </div>
    <div class="form-group col-md-8">
      <label for="ville">Ville</label>
      <input type="text" id="ville" name="ville" class="form-control" required>
    </div>
  </div>
</form>

<%= button_to "Procéder au paiement", checkout_create_path(total: @order.items.sum(:price), order_id: @order.id), class: "btn btn-primary mt-3", data: { turbo: false } %>
